!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t){function n(){if(!s){s=!0;for(var e,t=i.length;t;){e=i,i=[];for(var n=-1;++n<t;)e[n]();t=i.length}s=!1}}function r(){}var o=t.exports={},i=[],s=!1;o.nextTick=function(e){i.push(e),s||setTimeout(n,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.binding=function(){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],2:[function(e,t){var n=e("./lib/Modernizr"),r=e("./lib/ModernizrProto"),o=e("./lib/classes"),i=e("./lib/testRunner"),s=e("./lib/setClasses");i(),s(o),delete r.addTest,delete r.addAsyncTest;for(var a=0;a<n._q.length;a++)n._q[a]();t.exports=n},{"./lib/Modernizr":3,"./lib/ModernizrProto":4,"./lib/classes":5,"./lib/setClasses":12,"./lib/testRunner":13}],3:[function(e,t){var n=e("./ModernizrProto"),r=function(){};r.prototype=n,r=new r,t.exports=r},{"./ModernizrProto":4}],4:[function(e,t){var n=e("./tests"),r={_version:"v3.0.0pre",_config:{classPrefix:"",enableClasses:!0},_q:[],on:function(e,t){setTimeout(function(){t(this[e])},0)},addTest:function(e,t,r){n.push({name:e,fn:t,options:r})},addAsyncTest:function(e){n.push({name:null,fn:e})}};t.exports=r},{"./tests":15}],5:[function(e,t){var n=[];t.exports=n},{}],6:[function(e,t){var n=function(){return document.createElement.apply(document,arguments)};t.exports=n},{}],7:[function(e,t){var n=document.documentElement;t.exports=n},{}],8:[function(e,t){function n(){var e=document.body;return e||(e=r("body"),e.fake=!0),e}var r=e("./createElement");t.exports=n},{"./createElement":6}],9:[function(e,t){function n(e,t,n,s){var a,c,u,l,f="modernizr",d=o("div"),h=i();if(parseInt(n,10))for(;n--;)u=o("div"),u.id=s?s[n]:f+(n+1),d.appendChild(u);return a=["&#173;",'<style id="s',f,'">',e,"</style>"].join(""),d.id=f,(h.fake?h:d).innerHTML+=a,h.appendChild(d),h.fake&&(h.style.background="",h.style.overflow="hidden",l=r.style.overflow,r.style.overflow="hidden",r.appendChild(h)),c=t(d,e),h.fake?(h.parentNode.removeChild(h),r.style.overflow=l,r.offsetHeight):d.parentNode.removeChild(d),!!c}var r=(e("./ModernizrProto"),e("./docElement")),o=e("./createElement"),i=e("./getBody");t.exports=n},{"./ModernizrProto":4,"./createElement":6,"./docElement":7,"./getBody":8}],10:[function(e,t){function n(e,t){return typeof e===t}t.exports=n},{}],11:[function(e,t){var n=e("./ModernizrProto"),r=" -webkit- -moz- -o- -ms- ".split(" ");n._prefixes=r,t.exports=r},{"./ModernizrProto":4}],12:[function(e,t){function n(e){var t=o.className,n=r._config.classPrefix||"",i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2"),r._config.enableClasses&&(t+=" "+n+e.join(" "+n),o.className=t)}var r=e("./Modernizr"),o=e("./docElement");t.exports=n},{"./Modernizr":3,"./docElement":7}],13:[function(e,t){function n(){var e,t,n,a,c,u,l;for(var f in r){if(e=[],t=r[f],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(a=s(t.fn,"function")?t.fn():t.fn,c=0;c<e.length;c++)u=e[c],l=u.split("."),1===l.length?o[l[0]]=a:2===l.length&&(o[l[0]][l[1]]=a),i.push((a?"":"no-")+l.join("-"))}}var r=e("./tests"),o=e("./Modernizr"),i=e("./classes"),s=e("./is");t.exports=n},{"./Modernizr":3,"./classes":5,"./is":10,"./tests":15}],14:[function(e,t){var n=e("./ModernizrProto"),r=e("./injectElementWithStyles"),o=n.testStyles=r;t.exports=o},{"./ModernizrProto":4,"./injectElementWithStyles":9}],15:[function(e,t){var n=[];t.exports=n},{}],16:[function(e){var t=e("./../lib/Modernizr"),n=e("./../lib/prefixes"),r=e("./../lib/testStyles");t.addTest("touchevents",function(){var e;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)e=!0;else{var t=["@media (",n.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");r(t,function(t){e=9===t.offsetTop})}return e})},{"./../lib/Modernizr":3,"./../lib/prefixes":11,"./../lib/testStyles":14}],17:[function(e,t){"use strict";function n(e){function t(e){return null===u?void f.push(e):void i(function(){var t=u?e.onFulfilled:e.onRejected;if(null===t)return void(u?e.resolve:e.reject)(l);var n;try{n=t(l)}catch(r){return void e.reject(r)}e.resolve(n)})}function s(e){try{if(e===d)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void o(t.bind(e),s,a)}u=!0,l=e,c()}catch(n){a(n)}}function a(e){u=!1,l=e,c()}function c(){for(var e=0,n=f.length;n>e;e++)t(f[e]);f=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var u=null,l=null,f=[],d=this;this.then=function(e,o){return new n(function(n,i){t(new r(e,o,n,i))})},o(e,s,a)}function r(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function o(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(o){if(r)return;r=!0,n(o)}}var i=e("asap");t.exports=n},{asap:19}],18:[function(e,t){"use strict";function n(e){this.then=function(t){return"function"!=typeof t?this:new r(function(n,r){o(function(){try{n(t(e))}catch(o){r(o)}})})}}var r=e("./core.js"),o=e("asap");t.exports=r,n.prototype=Object.create(r.prototype);var i=new n(!0),s=new n(!1),a=new n(null),c=new n(void 0),u=new n(0),l=new n("");r.resolve=function(e){if(e instanceof r)return e;if(null===e)return a;if(void 0===e)return c;if(e===!0)return i;if(e===!1)return s;if(0===e)return u;if(""===e)return l;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new r(t.bind(e))}catch(o){return new r(function(e,t){t(o)})}return new n(e)},r.from=r.cast=function(e){var t=new Error("Promise.from and Promise.cast are deprecated, use Promise.resolve instead");return t.name="Warning",console.warn(t.stack),r.resolve(e)},r.denodeify=function(e,t){return t=t||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments);return new r(function(r,i){for(;o.length&&o.length>t;)o.pop();o.push(function(e,t){e?i(e):r(t)}),e.apply(n,o)})}},r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null;try{return e.apply(this,arguments).nodeify(n)}catch(i){if(null===n||"undefined"==typeof n)return new r(function(e,t){t(i)});o(function(){n(i)})}}},r.all=function(){var e=1===arguments.length&&Array.isArray(arguments[0]),t=Array.prototype.slice.call(e?arguments[0]:arguments);if(!e){var n=new Error("Promise.all should be called with a single array, calling it with multiple arguments is deprecated");n.name="Warning",console.warn(n.stack)}return new r(function(e,n){function r(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){r(i,e)},n)}t[i]=s,0===--o&&e(t)}catch(c){n(c)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){e.forEach(function(e){r.resolve(e).then(t,n)})})},r.prototype.done=function(){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(e){o(function(){throw e})})},r.prototype.nodeify=function(e){return"function"!=typeof e?this:void this.then(function(t){o(function(){e(null,t)})},function(t){o(function(){e(t)})})},r.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":17,asap:19}],19:[function(e,t){(function(e){function n(){for(;o.next;){o=o.next;var e=o.task;o.task=void 0;var t=o.domain;t&&(o.domain=void 0,t.enter());try{e()}catch(r){if(c)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}s=!1}function r(t){i=i.next={task:t,domain:c&&e.domain,next:null},s||(s=!0,a())}var o={task:void 0,next:null},i=o,s=!1,a=void 0,c=!1;if("undefined"!=typeof e&&e.nextTick)c=!0,a=function(){e.nextTick(n)};else if("function"==typeof setImmediate)a="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=n,a=function(){u.port2.postMessage(0)}}else a=function(){setTimeout(n,0)};t.exports=r}).call(this,e("_process"))},{_process:1}],20:[function(e,t){(function(){"use strict";function n(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];return new p(function(e,r){var o=v.open(n.name,n.version);o.onerror=function(){r(o.error)},o.onupgradeneeded=function(){o.result.createObjectStore(n.storeName)},o.onsuccess=function(){n.db=o.result,t._dbInfo=n,e()}})}function r(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new p(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),s=i.get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),t(e)},s.onerror=function(){r(s.error)}})["catch"](r)});return d(r,t),r}function o(e,t){var n=this,r=new p(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),s=i.openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=e(n.value,n.key,a++);void 0!==r?t(r):n["continue"]()}else t()},s.onerror=function(){r(s.error)}})["catch"](r)});return d(r,t),r}function i(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new p(function(n,o){r.ready().then(function(){var i=r._dbInfo,s=i.db.transaction(i.storeName,"readwrite"),a=s.objectStore(i.storeName);null===t&&(t=void 0);var c=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){o(c.error)}})["catch"](o)});return d(o,n),o}function s(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new p(function(t,r){n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),s=i.objectStore(o.storeName),a=s["delete"](e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(e){var t=e.target.error;"QuotaExceededError"===t&&r(t)}})["catch"](r)});return d(r,t),r}function a(e){var t=this,n=new p(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),i=o.objectStore(r.storeName),s=i.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){n(s.error)}})["catch"](n)});return d(n,e),n}function c(e){var t=this,n=new p(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}})["catch"](n)});return f(n,e),n}function u(e,t){var n=this,r=new p(function(t,r){return 0>e?void t(null):void n.ready().then(function(){var o=n._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),s=!1,a=i.openCursor();a.onsuccess=function(){var n=a.result;return n?void(0===e?t(n.key):s?t(n.key):(s=!0,n.advance(e))):void t(null)},a.onerror=function(){r(a.error)}})["catch"](r)});return f(r,t),r}function l(e){var t=this,n=new p(function(e,n){t.ready().then(function(){var r=t._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),i=o.openCursor(),s=[];i.onsuccess=function(){var t=i.result;return t?(s.push(t.key),void t["continue"]()):void e(s)},i.onerror=function(){n(i.error)}})["catch"](n)});return f(n,e),n}function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function d(e,t){t&&e.then(function(e){h(t,e)},function(e){t(e)})}function h(e,t){return e?setTimeout(function(){return e(null,t)},0):void 0}var p="undefined"!=typeof t&&t.exports?e("promise"):this.Promise,v=v||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(v){var g={_driver:"asyncStorage",_initStorage:n,iterate:o,getItem:r,setItem:i,removeItem:s,clear:a,length:c,key:u,keys:l};"undefined"!=typeof t&&t.exports?t.exports=g:"function"==typeof define&&define.amd?define("asyncStorage",function(){return g}):this.asyncStorage=g}}).call(window)},{promise:18}],21:[function(e,t){(function(){"use strict";function n(t){var n=this,r={};if(t)for(var o in t)r[o]=t[o];r.keyPrefix=r.name+"/",n._dbInfo=r;var i=new d(function(t){y===m.DEFINE?e(["localforageSerializer"],t):t(y===m.EXPORT?e("./../utils/serializer"):h.localforageSerializer)});return i.then(function(e){return p=e,d.resolve()})}function r(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=v.length-1;n>=0;n--){var r=v.key(n);0===r.indexOf(e)&&v.removeItem(r)}});return f(n,e),n}function o(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=v.getItem(t.keyPrefix+e);return r&&(r=p.deserialize(r)),r});return f(r,t),r}function i(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo.keyPrefix,r=t.length,o=v.length,i=0;o>i;i++){var s=v.key(i),a=v.getItem(s);if(a&&(a=p.deserialize(a)),a=e(a,s.substring(r),i+1),void 0!==a)return a}});return f(r,t),r}function s(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=v.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return f(r,t),r}function a(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=v.length,r=[],o=0;n>o;o++)0===v.key(o).indexOf(e.keyPrefix)&&r.push(v.key(o).substring(e.keyPrefix.length));return r});return f(n,e),n}function c(e){var t=this,n=t.keys().then(function(e){return e.length});return f(n,e),n}function u(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;v.removeItem(t.keyPrefix+e)});return f(r,t),r}function l(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new d(function(o,i){p.serialize(t,function(t,s){if(s)i(s);else try{var a=r._dbInfo;v.setItem(a.keyPrefix+e,t),o(n)}catch(c){("QuotaExceededError"===c.name||"NS_ERROR_DOM_QUOTA_REACHED"===c.name)&&i(c),i(c)}})})});return f(o,n),o}function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var d="undefined"!=typeof t&&t.exports?e("promise"):this.Promise,h=this,p=null,v=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;v=this.localStorage}catch(g){return}var m={DEFINE:1,EXPORT:2,WINDOW:3},y=m.WINDOW;"undefined"!=typeof t&&t.exports?y=m.EXPORT:"function"==typeof define&&define.amd&&(y=m.DEFINE);var w={_driver:"localStorageWrapper",_initStorage:n,iterate:i,getItem:o,setItem:l,removeItem:u,clear:r,length:c,key:s,keys:a};y===m.EXPORT?t.exports=w:y===m.DEFINE?define("localStorageWrapper",function(){return w}):this.localStorageWrapper=w}).call(window)},{"./../utils/serializer":24,promise:18}],22:[function(e,t){(function(){"use strict";function n(t){var n=this,r={db:null};if(t)for(var o in t)r[o]="string"!=typeof t[o]?t[o].toString():t[o];var i=new d(function(t){m===g.DEFINE?e(["localforageSerializer"],t):t(m===g.EXPORT?e("./../utils/serializer"):h.localforageSerializer)}),s=new d(function(e,o){try{r.db=v(r.name,String(r.version),r.description,r.size)}catch(i){return n.setDriver(n.LOCALSTORAGE).then(function(){return n._initStorage(t)}).then(e)["catch"](o)}r.db.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){n._dbInfo=r,e()},function(e,t){o(t)})})});return i.then(function(e){return p=e,s})}function r(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new d(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=p.deserialize(r)),t(r)},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function o(e,t){var n=this,r=new d(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT * FROM "+o.storeName,[],function(n,r){for(var o=r.rows,i=o.length,s=0;i>s;s++){var a=o.item(s),c=a.value;if(c&&(c=p.deserialize(c)),c=e(c,a.key,s+1),void 0!==c)return void t(c)}t()},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function i(e,t,n){var r=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new d(function(n,o){r.ready().then(function(){void 0===t&&(t=null);var i=t;p.serialize(t,function(t,s){if(s)o(s);else{var a=r._dbInfo;a.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(i)},function(e,t){o(t)})},function(e){e.code===e.QUOTA_ERR&&o(e)})}})})["catch"](o)});return f(o,n),o}function s(e,t){var n=this;"string"!=typeof e&&(window.console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new d(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function a(e){var t=this,n=new d(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function c(e){var t=this,n=new d(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function u(e,t){var n=this,r=new d(function(t,r){n.ready().then(function(){var o=n._dbInfo;o.db.transaction(function(n){n.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return f(r,t),r}function l(e){var t=this,n=new d(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)},function(e,t){n(t)})})})["catch"](n)});return f(n,e),n}function f(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var d="undefined"!=typeof t&&t.exports?e("promise"):this.Promise,h=this,p=null,v=this.openDatabase;if(v){var g={DEFINE:1,EXPORT:2,WINDOW:3},m=g.WINDOW;"undefined"!=typeof t&&t.exports?m=g.EXPORT:"function"==typeof define&&define.amd&&(m=g.DEFINE);var y={_driver:"webSQLStorage",_initStorage:n,iterate:o,getItem:r,setItem:i,removeItem:s,clear:a,length:c,key:u,keys:l};m===g.DEFINE?define("webSQLStorage",function(){return y}):m===g.EXPORT?t.exports=y:this.webSQLStorage=y}}).call(window)},{"./../utils/serializer":24,promise:18}],23:[function(e,t){(function(){"use strict";function n(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function r(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=v(t[n])?t[n].slice():t[n])}return arguments[0]}function o(e){for(var t in c)if(c.hasOwnProperty(t)&&c[t]===e)return!0;return!1}function i(e){this._config=r({},d,e),this._driverSet=null,this._ready=!1,this._dbInfo=null;for(var t=0;t<l.length;t++)n(this,l[t]);this.setDriver(this._config.driver)}var s="undefined"!=typeof t&&t.exports?e("promise"):this.Promise,a={},c={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},u=[c.INDEXEDDB,c.WEBSQL,c.LOCALSTORAGE],l=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],f={DEFINE:1,EXPORT:2,WINDOW:3},d={description:"",driver:u.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},h=f.WINDOW;"undefined"!=typeof t&&t.exports?h=f.EXPORT:"function"==typeof define&&define.amd&&(h=f.DEFINE);var p=function(e){var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB,n={};return n[c.WEBSQL]=!!e.openDatabase,n[c.INDEXEDDB]=!!function(){if("undefined"!=typeof e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;try{return t&&"function"==typeof t.open&&"undefined"!=typeof e.IDBKeyRange}catch(n){return!1}}(),n[c.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(t){return!1}}(),n}(this),v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},g=this;i.prototype.INDEXEDDB=c.INDEXEDDB,i.prototype.LOCALSTORAGE=c.LOCALSTORAGE,i.prototype.WEBSQL=c.WEBSQL,i.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},i.prototype.defineDriver=function(e,t,n){var r=new s(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),c=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(i);if(o(e._driver))return void n(c);for(var u=l.concat("_initStorage"),f=0;f<u.length;f++){var d=u[f];if(!d||!e[d]||"function"!=typeof e[d])return void n(i)}var h=s.resolve(!0);"_support"in e&&(h=e._support&&"function"==typeof e._support?e._support():s.resolve(!!e._support)),h.then(function(n){p[r]=n,a[r]=e,t()},n)}catch(v){n(v)}});return r.then(t,n),r},i.prototype.driver=function(){return this._driver||null},i.prototype.ready=function(e){var t=this,n=new s(function(e,n){t._driverSet.then(function(){null===t._ready&&(t._ready=t._initStorage(t._config)),t._ready.then(e,n)})["catch"](n)});return n.then(e,e),n},i.prototype.setDriver=function(t,n,r){function i(){c._config.driver=c.driver()}var c=this;return"string"==typeof t&&(t=[t]),this._driverSet=new s(function(n,r){var i=c._getFirstSupportedDriver(t),u=new Error("No available storage method found.");if(!i)return c._driverSet=s.reject(u),void r(u);if(c._dbInfo=null,c._ready=null,o(i)){if(h===f.DEFINE)return void e([i],function(e){c._extend(e),n()});if(h===f.EXPORT){var l;switch(i){case c.INDEXEDDB:l=e("./drivers/indexeddb");break;case c.LOCALSTORAGE:l=e("./drivers/localstorage");break;case c.WEBSQL:l=e("./drivers/websql")}c._extend(l)}else c._extend(g[i])}else{if(!a[i])return c._driverSet=s.reject(u),void r(u);c._extend(a[i])}n()}),this._driverSet.then(i,i),this._driverSet.then(n,r),this._driverSet},i.prototype.supports=function(e){return!!p[e]},i.prototype._extend=function(e){r(this,e)},i.prototype._getFirstSupportedDriver=function(e){if(e&&v(e))for(var t=0;t<e.length;t++){var n=e[t];if(this.supports(n))return n}return null},i.prototype.createInstance=function(e){return new i(e)};var m=new i;h===f.DEFINE?define("localforage",function(){return m}):h===f.EXPORT?t.exports=m:this.localforage=m}).call(window)},{"./drivers/indexeddb":20,"./drivers/localstorage":21,"./drivers/websql":22,promise:18}],24:[function(e,t){(function(){"use strict";function e(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,i=s;e instanceof ArrayBuffer?(r=e,i+=c):(r=e.buffer,"[object Int8Array]"===n?i+=l:"[object Uint8Array]"===n?i+=f:"[object Uint8ClampedArray]"===n?i+=d:"[object Int16Array]"===n?i+=h:"[object Uint16Array]"===n?i+=v:"[object Int32Array]"===n?i+=p:"[object Uint32Array]"===n?i+=g:"[object Float32Array]"===n?i+=m:"[object Float64Array]"===n?i+=y:t(new Error("Failed to get type for BinaryArray"))),t(i+o(r))}else if("[object Blob]"===n){var a=new FileReader;a.onload=function(){var e=o(this.result);t(s+u+e)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(w){window.console.error("Couldn't convert value into a JSON string: ",e),t(null,w)}}function n(e){if(e.substring(0,a)!==s)return JSON.parse(e);var t=e.substring(w),n=e.substring(a,w),o=r(t);switch(n){case c:return o;case u:return new Blob([o]);case l:return new Int8Array(o);case f:return new Uint8Array(o);case d:return new Uint8ClampedArray(o);case h:return new Int16Array(o);case v:return new Uint16Array(o);case p:return new Int32Array(o);case g:return new Uint32Array(o);case m:return new Float32Array(o);case y:return new Float64Array(o);default:throw new Error("Unkown type: "+n)}}function r(e){var t,n,r,o,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),f=new Uint8Array(l);for(t=0;c>t;t+=4)n=i.indexOf(e[t]),r=i.indexOf(e[t+1]),o=i.indexOf(e[t+2]),s=i.indexOf(e[t+3]),f[u++]=n<<2|r>>4,f[u++]=(15&r)<<4|o>>2,f[u++]=(3&o)<<6|63&s;return l}function o(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=i[n[t]>>2],r+=i[(3&n[t])<<4|n[t+1]>>4],r+=i[(15&n[t+1])<<2|n[t+2]>>6],r+=i[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="__lfsc__:",a=s.length,c="arbf",u="blob",l="si08",f="ui08",d="uic8",h="si16",p="si32",v="ur16",g="ui32",m="fl32",y="fl64",w=a+c.length,b={serialize:e,deserialize:n,stringToBuffer:r,bufferToString:o};"undefined"!=typeof t&&t.exports?t.exports=b:"function"==typeof define&&define.amd?define("localforageSerializer",function(){return b}):this.localforageSerializer=b}).call(window)},{}],25:[function(e,t){function n(e,t){this.pos=e,this.kind=t}t.exports=n},{}],26:[function(e,t){var n=e("./Vector2.js"),r={Left:function(){return new n(-1,0)},Up:function(){return new n(0,-1)},Right:function(){return new n(1,0)},Down:function(){return new n(0,1)}};t.exports=r},{"./Vector2.js":30}],27:[function(e,t){function n(e,t,n){this.zhide=e,this.zshow=t,this.wrapper=n,this.states={},this.toCallbacks={},this.fromCallbacks={},this.currentState="hidden"}n.prototype.hide=function(){void 0!=this.fromCallbacks[this.currentState]&&this.fromCallbacks[this.currentState]("hidden"),this.wrapper.innerHTML="",this.wrapper.style.zIndex=this.zhide,this.currentState="hidden"},n.prototype.show=function(e){if(void 0!=this.states[e]){void 0!=this.fromCallbacks[this.currentState]&&this.fromCallbacks[this.currentState](e),this.wrapper.innerHTML=this.states[e],this.wrapper.style.zIndex=this.zshow;var t=this.currentState;this.currentState=e,void 0!=this.toCallbacks[this.currentState]&&this.toCallbacks[this.currentState](t)}},t.exports=n},{}],28:[function(e,t){function n(){this.segments=[],this.color=new Object,this.color.body=new Object,this.color.head=new Object,this.setColor(201,255,4)}var r=e("./Vector2.js"),o=e("./Direction.js");n.prototype.setColor=function(e,t,n){this.color.body.r=e,this.color.body.g=t,this.color.body.b=n,this.color.body.toString="rgb("+this.color.body.r+", "+this.color.body.g+", "+this.color.body.b+")",this.color.head.r=Math.round(.8*this.color.body.r),this.color.head.g=Math.round(.8*this.color.body.g),this.color.head.b=Math.round(.8*this.color.body.b),this.color.head.toString="rgb("+this.color.head.r+", "+this.color.head.g+", "+this.color.head.b+")"},n.prototype.initialize=function(e,t,n){if(this.segments=[],e>=t){for(var i=0;3>i;i++)this.segments.push(new r(i,Math.floor(t/2)));this.direction=o.Right()}else{for(var i=0;3>i;i++)this.segments.push(new r(Math.floor(e/2),i));this.direction=o.Down()}this.lastDirectionMoved=this.direction.clone(),this.corner1=new r(0,0),this.corner2=new r(e-1,t-1),this.colliders=n},n.prototype.draw=function(e,t){var n=Math.abs(this.corner2.x-this.corner1.x)+1,r=e.width/n,o=.5*r,i=.85*r,s=this;this.segments.forEach(function(r,a,c){var u=r.x*e.width/n,l=r.y*e.width/n;if(t.beginPath(),t.arc(u+o,l+o,i/2-.5,0,2*Math.PI,!0),t.fillStyle=a==c.length-1?s.color.head.toString:s.color.body.toString,t.fill(),t.closePath(),a<c.length-1){u+=o,l+=o;var f=c[a+1].x*e.width/n,d=c[a+1].y*e.width/n;f+=o,d+=o,t.beginPath(),t.moveTo(u,l),t.lineTo(f,d),t.lineWidth=i,t.strokeStyle=s.color.body.toString,t.stroke(),t.closePath()}})},n.prototype.clear=function(e,t){var n=Math.abs(this.corner2.x-this.corner1.x)+1,r=Math.abs(this.corner2.y-this.corner1.y)+1;this.segments.forEach(function(o){var i=o.x*e.width/n,s=o.y*e.width/n;t.clearRect(i-.5,s-.5,e.width/n+1,e.height/r+1)})},n.prototype.grow=function(){if(this.segments.length>=1){var e=this.segments[this.segments.length-1],t=e.add(this.direction);return this.segments.push(t),this.lastDirectionMoved=this.direction.clone(),t}console.log("Snake cannot grow: has no segments.")},n.prototype.slide=function(){if(this.segments.length>=1){var e=this.segments[this.segments.length-1],t=e.add(this.direction);if(1===this.segments.length)this.segments=[t];else{for(var n=0;n<this.segments.length-1;n++)this.segments[n]=this.segments[n+1];this.segments[this.segments.length-1]=t}return this.lastDirectionMoved=this.direction.clone(),t}console.log("Snake cannot slide: has no segments.")},n.prototype.selfAt=function(e,t){var n=e.indexIn(this.segments);return-1===n?!1:0===n&&t?!1:!0},n.prototype.safelyChangeDirection=function(e,t,n){if(this.segments.length>=1){var r=this.segments[this.segments.length-1],o=r.add(e);if(!this.selfAt(o,!0)&&o.inside(t,n))return this.direction=e,!0}else console.log("Snake cannot change direction: has no segments.");return!1},n.prototype.collideWith=function(e,t,n){return"food"===e.kind?(n=n.splice(t,1),this.grow()):void 0},n.prototype.moveCallback=function(){void 0!=this._moveCallback&&this._moveCallback()},n.prototype.dieCallback=function(){void 0!=this._dieCallback&&this._dieCallback()},n.prototype.moveForward=function(){var e=this.segments[this.segments.length-1],t=e.add(this.direction);if(!this.selfAt(t,!0)&&t.inside(this.corner1,this.corner2)){var n=t.indexIn(this.colliders.map(function(e){return e.pos}));if(-1===n)this.slide(),this.moveCallback();else{var r=this.colliders[n],o=r.kind;this.collideWith(r,n,this.colliders),"food"===o&&this.moveCallback()}}else this.dieCallback()},n.prototype.input=function(e){if("Up"===e||"Right"===e||"Down"===e||"Left"===e||"Forward"===e){var t;t="Forward"===e?this.direction.clone():o[e]();var n=this.segments[this.segments.length-1],r=n.add(t);if(!this.selfAt(r,!0)&&r.inside(this.corner1,this.corner2)){this.direction=t;var i=r.indexIn(this.colliders.map(function(e){return e.pos}));if(-1===i)this.slide(),this.moveCallback();else{var s=this.colliders[i],a=s.kind;this.collideWith(s,i,this.colliders),"food"===a&&this.moveCallback()}}}},t.exports=n},{"./Direction.js":26,"./Vector2.js":30}],29:[function(require,module,exports){function Timestepper(){}Timestepper.prototype.dt=500,Timestepper.prototype.maxSteps=1,Timestepper.prototype.time=0,Timestepper.prototype.state="notStarted",Timestepper.prototype.clear=function(){this.time=0,this.currentTime=(new Date).getTime()},Timestepper.prototype.stepCallback=function(){console.log("Timestepper stepped.")},Timestepper.prototype.accumulate=function(){if("notStarted"!=this.state){var e=(new Date).getTime(),t=e-this.currentTime;
this.currentTime=e,this.time+=t}else console.log("Timestepper cannot accumulate. Timestepper never started.")},Timestepper.prototype.Start=function(){if("notStarted"===this.state||"paused"===this.state)with(this.currentTime=(new Date).getTime(),this.state="running",this)setTimeout(function(){Update()},0);else console.log("Timestepper already running. state:",this.state)},Timestepper.prototype.Pause=function(){"running"===this.state?(this.accumulate(),this.state="paused"):console.log("Timestepper will not pause because not currently running. state:",this.state)},Timestepper.prototype.Update=function(){if("running"===this.state){this.accumulate();for(var steps=0;steps<this.maxSteps&&this.time>=this.dt;)this.time-=this.dt,steps+=1,this.stepCallback();if("running"===this.state)with(this)setTimeout(function(){Update()},0)}else console.log("Timestepper will not call update again. state:",this.state)},module.exports=Timestepper},{}],30:[function(e,t){function n(e,t){void 0!==e&&(this.x=e),void 0!==t&&(this.y=t)}n.prototype.x=0,n.prototype.y=0,n.prototype.equals=function(e){return this.x===e.x&&this.y===e.y?!0:!1},n.prototype.add=function(e){return new n(this.x+e.x,this.y+e.y)},n.prototype.indexIn=function(e){for(var t=0;t<e.length;t++)if(this.equals(e[t]))return t;return-1},n.prototype.inside=function(e,t){return this.x>=Math.min(e.x,t.x)&&this.x<=Math.max(e.x,t.x)&&this.y>=Math.min(e.y,t.y)&&this.y<=Math.max(e.y,t.y)?!0:!1},n.prototype.switched=function(){return new n(this.y,this.x)},n.prototype.clone=function(){return new n(this.x,this.y)},t.exports=n},{}],31:[function(e){function t(e,t){return Math.floor(Math.random()*(t-e+1))+e}function n(e,t,n){var r=Object(),o=Math.min(t,n),i=Math.max(t,n);return e.width>=e.height?(r.width=i,r.height=o):(r.width=o,r.height=i),r}function r(e,t,n,r){var o,i=e.parentElement.clientWidth/e.parentElement.clientHeight;"landscape"==r?o=n/t:"portrait"==r&&(o=t/n),i>=1?(void 0==o&&(o=n/t),i>o?(e.height=e.parentElement.clientHeight,e.width=e.height*o):(e.width=e.parentElement.clientWidth,e.height=e.width/o)):(void 0==o&&(o=t/n),o>i?(e.width=e.parentElement.clientWidth,e.height=e.width/o):(e.height=e.parentElement.clientHeight,e.width=e.height*o))}function o(e,t,n,r){var o,i=e.parentElement.clientWidth/e.parentElement.clientHeight;"landscape"==r?o=n/t:"portrait"==r&&(o=t/n),i>=1?(void 0==o&&(o=n/t),i>o?(e.style.height="100%",e.style.width="auto"):(e.style.width="100%",e.style.height="auto")):(void 0==o&&(o=t/n),o>i?(e.style.width="100%",e.style.height="auto"):(e.style.height="100%",e.style.width="auto"))}function i(){r(_,L,D),o(_,L,D)}function s(e,t,r,o,i){var s=n(e,r,o);i.forEach(function(n){var r=n.x*e.width/s.width,o=n.y*e.width/s.width;t.clearRect(r-.5,o-.5,e.width/s.width+1,e.height/s.height+1)})}function a(e,t,r,o,i){var s=n(e,r,o),a=e.width/s.width/2;i.forEach(function(n){if("food"===n.kind){var r=n.pos.x*e.width/s.width,o=n.pos.y*e.width/s.width;t.beginPath(),t.arc(r+a,o+a,.85*a,0,2*Math.PI,!0),t.fillStyle="#1700CC",t.fill(),t.closePath()}})}function c(e,t,n,r,o){var i=[];o.forEach(function(e){i.push(e.pos)}),s(e,t,n,r,i)}function u(e,n){var r=e.width*e.height;if(n.length>=r)return void 0;for(var o=t(0,e.width-1),i=t(0,e.height-1),s=0;r>s;s++){var a=new b(o,i),c=a.indexIn(n);if(-1===c)return a;o+=1,o>=e.width&&(o-=e.width,i+=1),i>=e.height&&(i=0)}}function l(e){var t=e.keyCode?e.keyCode:e.which;return t}function f(){function e(){r(_,L,D,t),o(_,L,D,t)}N.hide();var t,i=n(_,L,D);t=i.width>=i.height?"landscape":"portrait",window.addEventListener("resize",e),O=[],M.initialize(i.width,i.height,O);for(var s="food",l=0;3>l;l++){var f=u(i,O.map(function(e){return e.pos}).concat(M.segments)),d=new E(f,s);O.push(d)}M._moveCallback=function(){var t=u(i,O.map(function(e){return e.pos}).concat(M.segments));if(void 0==t){var r=n(_,L,D);M.segments.length==r.width*r.height&&(console.log("Win"),A.Pause(),W(),window.removeEventListener("resize",e),N.show("win"))}else if(O.length<3){var o=new E(t,"food");O.push(o)}A.clear()},M._dieCallback=function(){console.log("Die"),A.Pause(),W(),window.removeEventListener("resize",e),N.show("gameOver")},M.draw(_,C),a(_,C,L,D,O),R(),A.stepCallback=function(){M.clear(_,C),c(_,C,L,D,O),M.moveForward(),M.draw(_,C),a(_,C,L,D,O)},A.Start()}function d(){N.show("about")}function h(){N.show("howToPlay")}function p(){N.show("main")}function v(){return M.segments.length}function g(){console.log("Resume"),N.hide(),R(),A.Start()}function m(e){var t=l(e);(27===t||13===t)&&g()}var y=e("localforage");e("browsernizr/test/touchevents");var w=e("browsernizr"),b=e("./Vector2.js"),E=(e("./Direction.js"),e("./Collider.js")),k=e("./Snake.js"),S=e("./Timestepper.js"),x=e("./GUIManager.js");window.sneakySnake={},window.sneakySnake.clearLocalForage=function(){y.clear(function(e){console.log(e?e:"localforage cleared")})};var I,T,_=document.getElementById("game-canvas"),C=_.getContext("2d"),L=10,D=16,M=new k,O=[],N=new x(200,800,document.getElementById("gui")),A=new S,j=function(e){var t=l(e);M.clear(_,C),c(_,C,L,D,O),119===t||38===t?M.input("Up"):97===t||37===t?M.input("Left"):115===t||40===t?M.input("Down"):100===t||39===t?M.input("Right"):27===t&&(console.log("Pause"),N.show("pause")),M.draw(_,C),a(_,C,L,D,O)},P=function(e){return"touchstart"==e.type||"touchend"==e.type?new b(e.changedTouches[0].pageX,e.changedTouches[0].pageY):new b(e.pageX,e.pageY)},z=function(e){e.preventDefault(),I=P(e)},B=function(e){e.preventDefault(),T=P(e);var t=T.x-I.x,n=T.y-I.y,r=Math.sqrt(Math.pow(t,2)+Math.pow(n,2)),o=window.getComputedStyle(_).getPropertyValue("width");o=o.substring(0,o.length-2);var i=window.getComputedStyle(_).getPropertyValue("height");i=i.substring(0,i.length-2);var s=Math.sqrt(Math.pow(o,2)+Math.pow(i,2));if(M.clear(_,C),c(_,C,L,D,O),4>r)M.input("Forward");else if(r>.75*s)console.log("Pause"),N.show("pause");else{var u=Math.atan2(n,t),l=u/(Math.PI/2);switch(l=Math.round(l)){case-2:M.input("Left");break;case 2:M.input("Left");break;case-1:M.input("Up");break;case 0:M.input("Right");break;case 1:M.input("Down")}}M.draw(_,C),a(_,C,L,D,O)},R=function(){document.addEventListener("keypress",j),_.addEventListener("mousedown",z),_.addEventListener("touchstart",z),_.addEventListener("mouseup",B),_.addEventListener("touchend",B)},W=function(){document.removeEventListener("keypress",j),_.removeEventListener("mousedown",z),_.removeEventListener("touchstart",z),_.removeEventListener("mouseup",B),_.removeEventListener("touchend",B)};N.states.about='<div class="text-info">Sneaky Snake | Author: Costava | Version 1.0.0 | <a href="https://github.com/Costava/Sneaky-Snake" target="_blank">View source on Github</a></div><button class="button" id="about-back">Back</button>',N.toCallbacks.about=function(){document.getElementById("about-back").addEventListener("click",p)},N.fromCallbacks.about=function(){document.getElementById("about-back").removeEventListener("click",p)},N.states.howToPlay='<div class="text-info" id="how-to-play"></div><button class="button" id="how-to-play-back">Back</button>',N.toCallbacks.howToPlay=function(){var e="You are a sneaky snake. Eat tasty blueberries to grow. Watch out for yourself and the edges.",t="";t=w.touchevents?"Swipe to change direction. Tap to move forward. Swipe from any corner to the opposite corner to pause.":"Use WASD or arrow keys to move. Press the escape key to pause/resume.";var n=""+e+" "+t;document.getElementById("how-to-play").innerHTML=n,document.getElementById("how-to-play-back").addEventListener("click",p)},N.fromCallbacks.howToPlay=function(){document.getElementById("how-to-play-back").removeEventListener("click",p)},N.states.main='<h1 class="main-menu-title">Sneaky Snake</h1><div class="highScoreHolder text-info">High Score: <span id="highScore">...</span></div><button class="button" id="about">About</button><button class="button" id="how-to-play">How to Play</button><button class="button" id="new-game">New Game</button>',N.toCallbacks.main=function(){console.log("Show main menu gui"),window.addEventListener("resize",i),i(),document.getElementById("new-game").addEventListener("click",f),document.getElementById("about").addEventListener("click",d),document.getElementById("how-to-play").addEventListener("click",h),y.getItem("highScore",function(e,t){console.log("High score loaded"),null!=t&&(document.getElementById("highScore").innerHTML=t)})},N.fromCallbacks.main=function(){window.removeEventListener("resize",i),document.getElementById("new-game").removeEventListener("click",f),document.getElementById("about").removeEventListener("click",d),document.getElementById("how-to-play").removeEventListener("click",h)},N.states.pause='<div class="scoreHolder text-info">Score: <span id="score">...</span></div><button class="button" id="resume">Resume</button>',N.toCallbacks.pause=function(){A.Pause(),W(),document.getElementById("score").innerHTML=v(),document.getElementById("resume").addEventListener("mouseup",g),document.addEventListener("keypress",m)},N.fromCallbacks.pause=function(){document.getElementById("resume").removeEventListener("mouseup",g),document.removeEventListener("keypress",m)},N.states.gameOver='<div class="text-info">You are dead!</div><div class="scoreHolder text-info">Score: <span id="score">...</span></div><button class="button" id="game-over-back">Back to Main Menu</button>',N.toCallbacks.gameOver=function(){var e=v();document.getElementById("score").innerHTML=e,document.getElementById("game-over-back").addEventListener("click",p),y.getItem("highScore",function(t,n){e>n&&y.setItem("highScore",e,function(){console.log("New high score:",e),alert("New high score: "+e+"!")})})},N.fromCallbacks.gameOver=function(){document.getElementById("game-over-back").removeEventListener("click",p)},N.states.win='<div class="text-info">Congratulations! You are perfect!</div><div class="scoreHolder text-info">Score: <span id="score">...</span></div><button class="button" id="win-back">Back to Main Menu</button>',N.toCallbacks.win=function(){var e=v();document.getElementById("score").innerHTML=e,document.getElementById("win-back").addEventListener("click",p),y.getItem("highScore",function(t,n){e>n&&y.setItem("highScore",e,function(){console.log("New high score:",e),alert("New high score: "+e+"!")})})},N.fromCallbacks.win=function(){document.getElementById("win-back").removeEventListener("click",p)},N.show("main")},{"./Collider.js":25,"./Direction.js":26,"./GUIManager.js":27,"./Snake.js":28,"./Timestepper.js":29,"./Vector2.js":30,browsernizr:2,"browsernizr/test/touchevents":16,localforage:23}]},{},[31]);